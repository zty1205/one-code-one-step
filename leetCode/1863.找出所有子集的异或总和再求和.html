<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>1863. 找出所有子集的异或总和再求和</title>
  </head>
  <body>
    <script src="../helper/common.js"></script>
    <script src="../helper/node.js"></script>
    <script src="../helper/tree.js"></script>
    <script src="../helper/graph.js"></script>
    <script src="../helper/command.js"></script>
    <script>
      // https://leetcode.cn/problems/sum-of-all-subset-xor-totals/description/?envType=daily-question&envId=2025-07-02

      // 一个数组的 异或总和 定义为数组中所有元素按位 XOR 的结果；如果数组为 空 ，则异或总和为 0 。
      //
      // 提示：
      // 例如，数组 [2,5,6] 的 异或总和 为 2 XOR 5 XOR 6 = 1 。
      // 给你一个数组 nums ，请你求出 nums 中每个 子集 的 异或总和 ，计算并返回这些值相加之 和 。
      // 注意：在本题中，元素 相同 的不同子集应 多次 计数。
      // 数组 a 是数组 b 的一个 子集 的前提条件是：从 b 删除几个（也可能不删除）元素能够得到 a 。
      //
      // 提示：
      // 1 <= nums.length <= 12
      // 1 <= nums[i] <= 20

      /**
       * @param {number[]} nums
       * @return {number}
       */
      var subsetXORSum = function (nums) {};

      // --- answer-1 ---

      var subsetXORSum = function (nums) {
        return dfs(0, 0, nums);
      };

      function dfs(val, idx, nums) {
        if (idx === nums.length) {
          return val;
        }
        // 选择当前数字, 不选择
        return dfs(val ^ nums[idx], idx + 1, nums) + dfs(val, idx + 1, nums);
      }

      // --- answer-1 ---

      // --- answer-2 ---

      var subsetXORSum = function (nums) {
        let res = 0;
        const n = nums.length;
        for (let num of nums) {
          res |= num;
        }
        return res << (n - 1);
      };

      // --- answer-2 ---

      // var nums = [1,3];
      // var result = 6;
      // 解释：[1,3] 共有 4 个子集：

      // var nums = [5,1,6];
      // var result = 28;
      // 解释：[5,1,6] 共有 8 个子集：

      // var nums = [3,4,5,6,7,8];
      // var result = 480;
      // 解释：每个子集的全部异或总和值之和为 480 。

      console.log('nums = ', nums);
      console.log('result = ', result);
      console.log('subsetXORSum = ', subsetXORSum(nums));
    </script>
  </body>
</html>
