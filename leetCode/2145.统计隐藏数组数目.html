<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2145. 统计隐藏数组数目</title>
  </head>
  <body>
    <script src="../helper/common.js"></script>
    <script src="../helper/node.js"></script>
    <script src="../helper/tree.js"></script>
    <script src="../helper/graph.js"></script>
    <script src="../helper/command.js"></script>
    <script>
      // https://leetcode.cn/problems/count-the-hidden-sequences/description/?envType=daily-question&envId=2025-04-21

      // 给你一个下标从 0 开始且长度为 n 的整数数组 differences ，它表示一个长度为 n + 1 的 隐藏 数组 相邻 元素之间的 差值 。更正式的表述为：我们将隐藏数组记作 hidden ，那么 differences[i] = hidden[i + 1] - hidden[i] 。
      // 同时给你两个整数 lower 和 upper ，它们表示隐藏数组中所有数字的值都在 闭 区间 [lower, upper] 之间。
      //
      // 提示：
      // 比方说，differences = [1, -3, 4] ，lower = 1 ，upper = 6 ，那么隐藏数组是一个长度为 4 且所有值都在 1 和 6 （包含两者）之间的数组。
      // [3, 4, 1, 5] 和 [4, 5, 2, 6] 都是符合要求的隐藏数组。
      // [5, 6, 3, 7] 不符合要求，因为它包含大于 6 的元素。
      // [1, 2, 3, 4] 不符合要求，因为相邻元素的差值不符合给定数据。
      // 请你返回 符合 要求的隐藏数组的数目。如果没有符合要求的隐藏数组，请返回 0 。
      //
      // 提示：
      // n == differences.length
      // 1 <= n <= 105
      // -105 <= differences[i] <= 105
      // -105 <= lower <= upper <= 105

      /**
       * @param {number[]} differences
       * @param {number} lower
       * @param {number} upper
       * @return {number}
       */
      var numberOfArrays = function (differences, lower, upper) {};

      // --- answer-1 ---

      // 由第一个数决定数组的范围
      var numberOfArrays = function (differences = [], lower = 0, upper = 0) {
        // 这里的初始最大值最小值是0，因为要考虑differences长度为1的情况
        let max = 0;
        let min = 0;
        let sum = 0;
        for (let i = 0; i < differences.length; i++) {
          sum += differences[i];
          max = Math.max(max, sum);
          min = Math.min(min, sum);
        }
        if (max - min > upper - lower) {
          return 0;
        }
        return upper - lower - (max - min) + 1;
        // 或者
        // return Math.max(0, upper - lower - (max - min) + 1);
      };

      // --- answer-1 ---

      // --- answer-2 ---

      // --- answer-2 ---

      var differences = [1, -3, 4],
        lower = 1,
        upper = 6;
      var result = 2;
      // 解释：符合要求的隐藏数组为：

      // var differences = [3,-4,5,1,-2], lower = -4, upper = 5;
      // var result = 4;
      // 解释：符合要求的隐藏数组为：

      // var differences = [4,-7,2], lower = 3, upper = 6;
      // var result = 0;
      // 解释：没有符合要求的隐藏数组，所以返回 0 。

      var differences = [1],
        lower = 3,
        upper = 5;
      var result = 2;

      console.log('differences = ', differences);
      console.log('lower = ', lower);
      console.log('upper = ', upper);
      console.log('result = ', result);
      console.log('numberOfArrays = ', numberOfArrays(differences, lower, upper));
    </script>
  </body>
</html>
