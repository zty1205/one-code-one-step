<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>1287. 有序数组中出现次数超过25%的元素</title>
  </head>
  <body>
    <script src="../helper/common.js"></script>
    <script src="../helper/node.js"></script>
    <script src="../helper/tree.js"></script>
    <script src="../helper/graph.js"></script>
    <script src="../helper/command.js"></script>
    <script>
      // https://leetcode.cn/problems/element-appearing-more-than-25-in-sorted-array/?envType=daily-question&envId=2025-05-01

      // 给你一个非递减的 有序 整数数组，已知这个数组中恰好有一个整数，它的出现次数超过数组元素总数的 25%。
      // 请你找到并返回这个整数
      //
      // 提示：
      // 1 <= arr.length <= 10^4
      // 0 <= arr[i] <= 10^5

      /**
       * @param {number[]} arr
       * @return {number}
       */
      var findSpecialInteger = function (arr) {};

      // --- answer-1 ---

      // 不考虑顺序 直接计数
      var findSpecialInteger = function (arr = []) {
        const length = arr.length;
        const count = Math.floor(length / 4);
        const map = new Map();
        for (let i = 0; i < length; i++) {
          const num = arr[i];
          if (map.has(num)) {
            map.set(num, map.get(num) + 1);
          } else {
            map.set(num, 1);
          }
          if (map.get(num) > count) {
            return num;
          }
        }
        return -1;
      };

      // --- answer-1 ---

      // --- answer-2 ---

      // 直接遍历
      var findSpecialInteger = function (arr = []) {
        const length = arr.length;
        const count = Math.floor(length / 4);
        let num = arr[0];
        let times = 1;
        for (let i = 1; i < length; i++) {
          const item = arr[i];
          if (item === num) {
            times++;
          } else {
            num = item;
            times = 1;
          }
          if (times > count) {
            return num;
          }
        }
        return -1;
      };

      // --- answer-2 ---

      // 至多一个
      var findSpecialInteger = function (arr) {
        const m = Math.floor(arr.length / 4);
        for (const i of [m, m * 2 + 1]) {
          const x = arr[i];
          const j = _.sortedIndex(arr, x);
          if (arr[j + m] == x) {
            return x;
          }
        }
        return arr[m * 3 + 2];
      };

      // var arr = [1,2,2,6,6,6,6,7,10];
      // var result = 6;

      console.log('arr = ', arr);
      console.log('result = ', result);
      console.log('findSpecialInteger = ', findSpecialInteger(arr));
    </script>
  </body>
</html>
