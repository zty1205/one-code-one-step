<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2300. 咒语和药水的成功对数</title>
  </head>
  <body>
    <script>
      // https://leetcode.cn/problems/successful-pairs-of-spells-and-potions/description/?envType=study-plan-v2&envId=leetcode-75

      // 给你两个正整数数组 spells 和 potions ，长度分别为 n 和 m ，其中 spells[i] 表示第 i 个咒语的能量强度，potions[j] 表示第 j 瓶药水的能量强度。
      // 同时给你一个整数 success 。一个咒语和药水的能量强度 相乘 如果 大于等于 success ，那么它们视为一对 成功 的组合。
      // 请你返回一个长度为 n 的整数数组 pairs，其中 pairs[i] 是能跟第 i 个咒语成功组合的 药水 数目。
      //
      // 提示：
      // n == spells.length
      // m == potions.length
      // 1 <= n, m <= 105
      // 1 <= spells[i], potions[i] <= 105
      // 1 <= success <= 1010

      /**
       * @param {number[]} spells
       * @param {number[]} potions
       * @param {number} success
       * @return {number[]}
       */
      var successfulPairs = function (spells, potions, success) {};

      // --- answer-1 ---

      // 暴力
      var successfulPairs = function (spells = [], potions = [], success = 1) {
        return spells.map((item) => {
          let count = 0;
          for (let i = 0; i < potions.length; i++) {
            if (item * potions[i] >= success) {
              count++;
            }
          }
          return count;
        });
      };

      // --- answer-1 ---

      // --- answer-2 ---

      const findIndex = (arr, target) => {
        const len = arr.length;
        if (len === 0) return -1;
        let i = 0;
        let j = len - 1;
        while (i <= j) {
          const mid = i + Math.floor((j - i) / 2);
          if (arr[mid] >= target) {
            j = mid - 1;
          } else {
            i = mid + 1;
          }
        }
        return i === len ? -1 : i;
      };
      var successfulPairs = function (spells = [], potions = [], success = 1) {
        const len = potions.length;
        potions.sort((a, b) => a - b);
        return spells.map((item) => {
          const idx = findIndex(potions, success / item);
          if (idx === -1) return 0;
          return len - idx;
        });
      };

      // --- answer-2 ---

      var spells = [5, 1, 3],
        potions = [1, 2, 3, 4, 5],
        success = 7;
      var result = [4, 0, 3];
      // 解释：

      // var spells = [3,1,2], potions = [8,5,8], success = 16;
      // var result = [2,0,2];
      // 解释：

      console.log('spells = ', spells);
      console.log('potions = ', potions);
      console.log('success = ', success);
      console.log('result = ', result);
      console.log('successfulPairs = ', successfulPairs(spells, potions, success));
    </script>
  </body>
</html>
